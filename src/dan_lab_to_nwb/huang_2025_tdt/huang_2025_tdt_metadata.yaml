NWBFile:
  keywords:
    - Keyword1
    - Keyword2
    - Keyword3
  related_publications:
    - https://doi.org/###
  session_description:
    A rich text description of the experiment. Can also just be the abstract of the publication.
  institution: Institution where the lab is located
  lab: Dan
  experimenter:
    - Last, First Middle
    - Last, First Middle
Subject:
  species: Rattus norvegicus
  description: A rich text description of the subject
  age: P0D/  # in ISO 8601, such as "P1W2D"
  sex: U  # One of M, F, U, or O
  date_of_birth: 2014-06-22 00:00:00-04:00  # Example

Ophys:
  FiberPhotometry:
    OpticalFiberModels:
    - name: optical_fiber_model_1
      description: <description of optical fiber model 1>
      manufacturer: <manufacturer of the optical fiber>
      model_number: <model of the optical fiber>
      numerical_aperture: -1.0
      core_diameter_in_um: -1.0
    - name: optical_fiber_model_2
      description: <description of optical fiber model 2>
      manufacturer: <manufacturer of the optical fiber>
      model_number: <model of the optical fiber>
      numerical_aperture: -1.0
      core_diameter_in_um: -1.0

    OpticalFibers:
    - name: optical_fiber1
      description: <description of the optical fiber>
      model: optical_fiber_model_1
      serial_number: "OF001"
      fiber_insertion:
        depth_in_mm: -1.0
        insertion_position_ap_in_mm: -1.0
        insertion_position_ml_in_mm: -1.0
        insertion_position_dv_in_mm: -1.0
        position_reference: bregma
        hemisphere: <hemisphere>
        insertion_angle_pitch_in_deg: 0.0
        insertion_angle_yaw_in_deg: 0.0
        insertion_angle_roll_in_deg: 0.0
    - name: optical_fiber2
      description: <description of the optical fiber>
      model: optical_fiber_model_2
      serial_number: "OF002"
      fiber_insertion:
        depth_in_mm: -1.0
        insertion_position_ap_in_mm: -1.0
        insertion_position_ml_in_mm: -1.0
        insertion_position_dv_in_mm: -1.0
        position_reference: bregma
        hemisphere: <hemisphere>
        insertion_angle_pitch_in_deg: 0.0
        insertion_angle_yaw_in_deg: 0.0
        insertion_angle_roll_in_deg: 0.0

    ExcitationSourceModels:
    - name: excitation_source_model_calcium
      description: <description of the excitation source model for calcium signal>
      manufacturer: <manufacturer of the excitation source>
      model_number: <model of the excitation source>
      source_type: LED
      excitation_mode: one-photon
      wavelength_range_in_nm: [460, 470]
    - name: excitation_source_model_isosbestic
      description: <description of the excitation source model for isosbestic control>
      manufacturer: <manufacturer of the excitation source>
      model_number: <model of the excitation source>
      source_type: LED
      excitation_mode: one-photon
      wavelength_range_in_nm: [400, 410]

    ExcitationSources:
    - name: excitation_source_calcium_signal
      description: <description of the excitation source for the calcium signal (465nm)>
      model: excitation_source_model_calcium
      power_in_W: -1.0
      intensity_in_W_per_m2: -1.0
      exposure_time_in_s: -1.0
    - name: excitation_source_isosbestic_control
      description: <description of the excitation source for the isosbestic control (405nm)>
      model: excitation_source_model_isosbestic
      power_in_W: -1.0
      intensity_in_W_per_m2: -1.0
      exposure_time_in_s: -1.0

    PhotodetectorModels:
    - name: photodetector_model
      description: <description of the photodetector model>
      manufacturer: <manufacturer of the photodetector>
      model_number: <model of the photodetector>
      detector_type: photodiode
      wavelength_range_in_nm: [400, 700]
      gain: -1.0
      gain_unit: V/W

    Photodetectors:
    - name: photodetector
      description: <description of the photodetector>
      model: photodetector_model
      serial_number: "PD001"

    BandOpticalFilterModels:
    - name: emission_filter_model
      description: <description of emission filter model>
      manufacturer: <manufacturer of the emission filter>
      model_number: <model of the emission filter>
      filter_type: Bandpass
      center_wavelength_in_nm: -1.0
      bandwidth_in_nm: -1.0
    - name: excitation_filter_model
      description: <description of excitation filter model>
      manufacturer: <manufacturer of the excitation filter>
      model_number: <model of the excitation filter>
      filter_type: Bandpass
      center_wavelength_in_nm: -1.0
      bandwidth_in_nm: -1.0

    BandOpticalFilters:
    - name: emission_filter
      description: <description of emission filter>
      model: emission_filter_model
    - name: excitation_filter
      description: <description of excitation filter>
      model: excitation_filter_model

    DichroicMirrorModels:
    - name: dichroic_mirror_model
      description: <description of the dichroic mirror model>
      manufacturer: <manufacturer of the dichroic mirror>
      model_number: <model of the dichroic mirror>
      cut_on_wavelength_in_nm: -1.0
      cut_off_wavelength_in_nm: -1.0
      reflection_band_in_nm: [-1.0, -1.0]
      transmission_band_in_nm: [-1.0, -1.0]
      angle_of_incidence_in_degrees: -1.0

    DichroicMirrors:
    - name: dichroic_mirror
      description: <description of the dichroic mirror>
      model: dichroic_mirror_model
      serial_number: "DM001"

    FiberPhotometryViruses:
    - name: vta_virus
      description: <description of the viral vector for VTA>
      manufacturer: <manufacturer of the viral vector>
      construct_name: <construct name>
      titer_in_vg_per_ml: -1.0
    - name: pfc_virus
      description: <description of the viral vector for PFC>
      manufacturer: <manufacturer of the viral vector>
      construct_name: <construct name>
      titer_in_vg_per_ml: -1.0

    FiberPhotometryVirusInjections:
    - name: vta_virus_injection
      description: <description of viral injection for VTA>
      viral_vector: vta_virus
      location: <injection location>
      hemisphere: <hemisphere>
      reference: bregma at the cortical surface
      ap_in_mm: -1.0
      ml_in_mm: -1.0
      dv_in_mm: -1.0
      volume_in_uL: -1.0
    - name: pfc_virus_injection
      description: <description of viral injection for PFC>
      viral_vector: pfc_virus
      location: <injection location>
      hemisphere: <hemisphere>
      reference: bregma at the cortical surface
      ap_in_mm: -1.0
      ml_in_mm: -1.0
      dv_in_mm: -1.0
      volume_in_uL: -1.0

    FiberPhotometryIndicators:
    - name: vta_indicator
      description: <description of the indicator for VTA>
      manufacturer: <manufacturer of the indicator>
      label: <label of the indicator>
      viral_vector_injection: vta_virus_injection
    - name: pfc_indicator
      description: <description of the indicator for PFC>
      manufacturer: <manufacturer of the indicator>
      label: <label of the indicator>
      viral_vector_injection: pfc_virus_injection



    FiberPhotometryTable:
      name: fiber_photometry_table
      description: <description of the fiber photometry setup as a whole>
      rows:
      - name: 0
        location: Ventral Tegmental Area (VTA)
        excitation_wavelength_in_nm: 465.0
        emission_wavelength_in_nm: -1.0
        indicator: vta_indicator
        optical_fiber: optical_fiber1
        excitation_source: excitation_source_calcium_signal

        photodetector: photodetector
        dichroic_mirror: dichroic_mirror
        emission_filter: emission_filter
        excitation_filter: excitation_filter
      - name: 1
        location: Ventral Tegmental Area (VTA)
        excitation_wavelength_in_nm: 405.0
        emission_wavelength_in_nm: -1.0
        indicator: vta_indicator
        optical_fiber: optical_fiber1
        excitation_source: excitation_source_isosbestic_control

        photodetector: photodetector
        dichroic_mirror: dichroic_mirror
        emission_filter: emission_filter
        excitation_filter: excitation_filter
      - name: 2
        location: Prefrontal Cortex (PFC)
        excitation_wavelength_in_nm: 465.0
        emission_wavelength_in_nm: -1.0
        indicator: pfc_indicator
        optical_fiber: optical_fiber2
        excitation_source: excitation_source_calcium_signal

        photodetector: photodetector
        dichroic_mirror: dichroic_mirror
        emission_filter: emission_filter
        excitation_filter: excitation_filter
      - name: 3
        location: Prefrontal Cortex (PFC)
        excitation_wavelength_in_nm: 405.0
        emission_wavelength_in_nm: -1.0
        indicator: pfc_indicator
        optical_fiber: optical_fiber2
        excitation_source: excitation_source_isosbestic_control

        photodetector: photodetector
        dichroic_mirror: dichroic_mirror
        emission_filter: emission_filter
        excitation_filter: excitation_filter

    FiberPhotometryResponseSeries:
    - name: calcium_signalVTA
      description: The fluorescence from the calcium signal from VTA.
      stream_name: _465B
      stream_indices: null
      unit: a.u.
      fiber_photometry_table_region: [0]
      fiber_photometry_table_region_description: The region of the FiberPhotometryTable corresponding to the calcium signal of VTA.
    - name: isosbestic_controlVTA
      description: The fluorescence from the isosbestic control from VTA.
      stream_name: _405B
      stream_indices: null
      unit: a.u.
      fiber_photometry_table_region: [1]
      fiber_photometry_table_region_description: The region of the FiberPhotometryTable corresponding to the isosbestic control of VTA.
    - name: calcium_signalPFC
      description: The fluorescence from the calcium signal from PFC.
      stream_name: _465C
      stream_indices: null
      unit: a.u.
      fiber_photometry_table_region: [2]
      fiber_photometry_table_region_description: The region of the FiberPhotometryTable corresponding to the calcium signal of PFC.
    - name: isosbestic_controlPFC
      description: The fluorescence from the isosbestic control from PFC.
      stream_name: _405C
      stream_indices: null
      unit: a.u.
      fiber_photometry_table_region: [3]
      fiber_photometry_table_region_description: The region of the FiberPhotometryTable corresponding to the isosbestic control of PFC.

Behavior:
  ExternalVideos:
    VideoCamera1:
      description: Video recorded by camera 1.
      unit: Frames

Optogenetics:
  stimulation_software: TDT Synapse
  excitation_wavelength_in_nm: -1.0 # TODO: get excitation wavelength from Lindsay
  OptogeneticViruses:
    - name: virus
      description: pAAV-Syn-FLEX-rc[ChrimsonR-tdTomato] (AAV5) viral vector was used for optogenetic experiments.
      manufacturer: Addgene
      construct_name: pAAV-Syn-FLEX-rc[ChrimsonR-tdTomato] (AAV5)
      titer_in_vg_per_ml: 5.0e+12
  OptogeneticVirusInjections:
    - name: virus_injection_vta
      description: Viral injection into the Ventral Tegmental Area (VTA).
      viral_vector: virus
      location: Ventral Tegmental Area (VTA)
      hemisphere: right # TODO: get hemisphere from a subject-wise map
      reference: bregma at the cortical surface
      ap_in_mm: -3.8
      ml_in_mm: 0.3 # TODO: get ML coordinate from a subject-wise map (depends on hemisphere)
      dv_in_mm: -4.5
      volume_in_uL: 0.700
    - name: virus_injection_bf
      description: Viral injection into the Basal Forebrain (BF).
      viral_vector: virus
      location: Basal Forebrain (BF)
      hemisphere: right # TODO: get hemisphere from a subject-wise map
      reference: bregma at the cortical surface
      ap_in_mm: 0.1
      ml_in_mm: 1.5 # TODO: get ML coordinate from a subject-wise map (depends on hemisphere)
      dv_in_mm: -5.3
      volume_in_uL: 0.700
    - name: virus_injection_lc
      description: Viral injection into the Locus Coeruleus (LC).
      viral_vector: virus
      location: Locus Coeruleus (LC)
      hemisphere: right # TODO: get hemisphere from a subject-wise map
      reference: bregma at the cortical surface
      ap_in_mm: -5.5
      ml_in_mm: 0.9 # TODO: get ML coordinate from a subject-wise map (depends on hemisphere)
      dv_in_mm: -3.6
      volume_in_uL: 0.700
  OptogeneticEffectors:
    - name: chrimsonR_vta
      description: ChrimsonR opsin used for optogenetic stimulation injected into the VTA.
      manufacturer: Addgene
      label: ChrimsonR
      viral_vector_injection: virus_injection_vta
    - name: chrimsonR_bf
      description: ChrimsonR opsin used for optogenetic stimulation injected into the BF.
      manufacturer: Addgene
      label: ChrimsonR
      viral_vector_injection: virus_injection_bf
    - name: chrimsonR_lc
      description: ChrimsonR opsin used for optogenetic stimulation injected into the LC.
      manufacturer: Addgene
      label: ChrimsonR
      viral_vector_injection: virus_injection_lc
  ExcitationSourceModels:
    - name: optogenetic_excitation_source_model
      description: An LED device used for optogenetic stimulation.
      manufacturer: RWD Life Sciences
      model_number: MRL-III-635L-1-1
      source_type: LED
      excitation_mode: one-photon
  ExcitationSources:
    - name: optogenetic_excitation_source
      description: An LED device used for optogenetic stimulation.
      model: optogenetic_excitation_source_model
      power_in_W: 0.020 # 20mW
  OpticalFiberModels:
    - name: optical_fiber_model
      description: Optical fiber used for optogenetic stimulation.
      manufacturer: Doric Lenses
      model_number: MFP_200/220/900-0.37_2m_FC-FC_LAF
      numerical_aperture: 0.39
      core_diameter_in_um: 200.0
      ferrule_name: FC Connector with Zirconia Ferrule
      ferrule_model: FC
      ferrule_diameter_in_mm: 2.5
  OpticalFibers:
    - name: optical_fiberVTA
      description: Optical fiber used for optogenetic stimulation in the VTA.
      model: optical_fiber_model
      fiber_insertion: # TODO: add fiber insertion details
        depth_in_mm: -1.0 # TODO: add depth in mm
        insertion_position_ap_in_mm: -1.0 # TODO: add AP coordinate
        insertion_position_ml_in_mm: -1.0 # TODO: add ML coordinate
        insertion_position_dv_in_mm: -1.0 # TODO: add DV coordinate
        position_reference: Bregma at the cortical surface
        hemisphere: right # TODO: get hemisphere from a subject-wise map
        insertion_angle_pitch_in_deg: 0.0 # TODO: add pitch angle
        insertion_angle_yaw_in_deg: 0.0 # TODO: add yaw angle
        insertion_angle_roll_in_deg: 0.0 # TODO: add roll angle
    - name: optical_fiberBF
      description: Optical fiber used for optogenetic stimulation in the BF.
      model: optical_fiber_model
      fiber_insertion:
        depth_in_mm: -1.0 # TODO: add depth in mm
        insertion_position_ap_in_mm: -1.0 # TODO: add AP coordinate
        insertion_position_ml_in_mm: -1.0 # TODO: add ML coordinate
        insertion_position_dv_in_mm: -1.0 # TODO: add DV coordinate
        position_reference: Bregma at the cortical surface
        hemisphere: right # TODO: get hemisphere from a subject-wise map
        insertion_angle_pitch_in_deg: 0.0 # TODO: add pitch angle
        insertion_angle_yaw_in_deg: 0.0 # TODO: add yaw angle
        insertion_angle_roll_in_deg: 0.0 # TODO: add roll angle
    - name: optical_fiberLC
      description: Optical fiber used for optogenetic stimulation in the LC.
      model: optical_fiber_model
      fiber_insertion:
        depth_in_mm: -1.0 # TODO: add depth in mm
        insertion_position_ap_in_mm: -1.0 # TODO: add AP coordinate
        insertion_position_ml_in_mm: -1.0 # TODO: add ML coordinate
        insertion_position_dv_in_mm: -1.0 # TODO: add DV coordinate
        position_reference: Bregma at the cortical surface
        hemisphere: right # TODO: get hemisphere from a subject-wise map
        insertion_angle_pitch_in_deg: 0.0 # TODO: add pitch angle
        insertion_angle_yaw_in_deg: 0.0 # TODO: add yaw angle
        insertion_angle_roll_in_deg: 0.0 # TODO: add roll angle
  OptogeneticSitesTable:
    description: Information about each optogenetic site, including the excitation source, optical fiber, and targeted effector.
    reference: Bregma at the cortical surface
    rows:
      - name: 0
        excitation_source: optogenetic_excitation_source
        optical_fiber: optical_fiberVTA
        effector: chrimsonR_vta
      - name: 1
        excitation_source: optogenetic_excitation_source
        optical_fiber: optical_fiberBF
        effector: chrimsonR_bf
      - name: 2
        excitation_source: optogenetic_excitation_source
        optical_fiber: optical_fiberLC
        effector: chrimsonR_lc

Ecephys:
  Device:
    - name: DeviceEEG
      description: EEG electrodes consist of 2 wires with X um diameter made of material Y wrapped around a metal screw inserted into the brain in location Z.
      manufacturer: Dan Lab
    - name: DeviceEMG
      description: EMG electrodes consist of 2 wires with X um diameter made of material Y inserted subcutaneously in the neck.
      manufacturer: Dan Lab
  ElectrodeGroup:
    - name: ElectrodeGroupEEG
      description: ElectrodeGroup for EEG channels.
      device: DeviceEEG
      location: Brain Region Z
    - name: ElectrodeGroupEMG
      description: ElectrodeGroup for EMG channels.
      device: DeviceEMG
      location: Subcutaneous neck
  ElectricalSeriesEEG:
    name: ElectricalSeriesEEG
    description: EEG voltage data recorded by a TDT acquisition system.
    filtering: The data was band-pass filtered between 0.5 Hz and 750 Hz using second-order filters. Notch filters were applied at 60 Hz, 120 Hz, 180 Hz, and 240 Hz with 20 dB attenuation and 1/10th octave bandwidth to remove power line interference and its harmonics.
  ElectricalSeriesEMG:
    name: ElectricalSeriesEMG
    description: EMG voltage data recorded by a TDT acquisition system.
    filtering: The data was band-pass filtered between 0.5 Hz and 750 Hz using second-order filters. Notch filters were applied at 60 Hz, 120 Hz, 180 Hz, and 240 Hz with 20 dB attenuation and 1/10th octave bandwidth to remove power line interference and its harmonics.
